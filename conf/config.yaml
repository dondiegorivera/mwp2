# conf/config.yaml
defaults:
  - data: default_data_config
  - model: tft_default
  - trainer: default_trainer
  - _self_

project_name: "market_prediction_workbench"
experiment_id: "B_default"
seed: 42

paths:
  data_dir: "data"
  raw_data_file: "${paths.data_dir}/raw/stock_data.csv"
  processed_data_file: data/processed/processed_data.eqonly.win.parquet
  log_dir: "experiments"

# NEW: central knobs for splitting & sampler
data:
  split:
    use_date_split: true
    train_pct: 0.8
    embargo_days: 30
  target: ["target_5d"]
  min_prediction_horizon: 1
  max_prediction_horizon: 1
  time_varying_known_reals:
    - day_of_week
    - day_of_month
    - month
    - is_quarter_end
    # NEW context features
    - mkt_ret_1d
    - mkt_vol_20d
    - sector_ret_1d
    - sector_vol_20d
    - region_ret_1d
    - region_vol_20d
  static_reals:
    - market_cap_static_norm

trainer:
  # training knobs from Section B
  precision: bf16-mixed
  accumulate_grad_batches: 4
  gradient_clip_val: 0.3
  epochs: 20

  # use cosine schedule with warmup
  lr_schedule:
    type: cosine_warmup
    warmup_frac: 0.1

  # early-stop on rank-IC
  early_stopping_monitor: val_rank_ic
  early_stopping_mode: max

evaluate:
  batch_size: 4096
  num_workers: 8
  sample_tickers: ["ALL"]

model:
  learning_rate: 7.5e-4